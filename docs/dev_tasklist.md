# プログラム開発タスクリスト（灯りのない町）

ゲームの初期プロトタイプからリリース準備までに必要となる主な実装タスクをカテゴリ別に整理したリストです。各フェーズの優先度や担当者アサイン時の参照ドキュメントとして活用してください。

## 1. プロジェクト基盤
- [ ] Unityプロジェクトを新規作成し、Universal Render Pipeline（URP）など使用するレンダーパイプラインを決定する。
- [ ] タイトル／メインゲーム／エンディングといったシーン構成の方針を決める。
- [ ] Scripts/Core、Scripts/Player など共通スクリプト用のフォルダ構成を作成する。
- [ ] Input System をキーボード＋マウス操作前提で設定する。
- [ ] Git と `.gitignore` を設定し、リポジトリ管理を開始する。
- [ ] デバッグ用のテストシーンを 1 つ作成する。

## 2. プレイヤー・カメラ制御
- [ ] PlayerController スクリプトを作成し、WASD による移動処理を実装する。
- [ ] マウス操作による視点回転処理を実装する。
- [ ] プレイヤーの移動速度・回転速度をインスペクタから調整できるようにする。
- [ ] CharacterController もしくは Rigidbody＋Collider でプレイヤーの当たり判定を設定する。
- [ ] カメラ揺れや FOV など、基本的なカメラ挙動を調整する。
- [ ] 段差や障害物に引っかからないかをテストする。

## 3. 光源・懐中電灯システム
- [ ] 懐中電灯用のライトオブジェクトを作成する。
- [ ] FlashlightController スクリプトを作成し、オン／オフ切り替えを実装する。
- [ ] バッテリーや明るさの減衰など、必要なパラメータを設計する。
- [ ] バッテリー残量を時間経過で減らす処理を実装する。
- [ ] 懐中電灯の状態を UI に反映するためのイベントを準備する。
- [ ] 光の有無で雰囲気が変わることをテストシーンで確認する。

## 4. インタラクション（調査・取得・イベント）
- [ ] 画面中央にレイを飛ばすレイキャスト処理を実装する。
- [ ] インタラクト可能オブジェクト用のインターフェース（`IInteractable`）を定義する。
- [ ] 調査ポイント（メモ／写真など）用のスクリプトを作成する。
- [ ] インタラクト時に UI メッセージを表示する処理を実装する。
- [ ] アイテム取得処理（フラグ ON のみの簡易版）を実装する。
- [ ] ドアの開閉ギミックを実装する。
- [ ] 特定のアイテム取得後にだけ開くドアのロジックを実装する。

## 5. ゲーム進行管理（フラグ・チャプター）
- [ ] ゲーム全体の進行状態を管理する `GameStateManager` を作成する。
- [ ] 進行フラグ（例：手がかり A 取得済み等）の仕組みを設計する。
- [ ] フラグの ON/OFF をシリアライズできる形で実装する。
- [ ] 各イベントが必要なフラグ条件をチェックする仕組みを実装する。
- [ ] チャプター／進行ステップを管理するシンプルなステートマシンを実装する。
- [ ] エンディング分岐条件をコード上で表現する。

## 6. セーブ・ロード
- [ ] 位置・フラグ・所持アイテムなどを含むセーブデータの構造体を定義する。
- [ ] セーブデータを JSON で保存する簡易セーブ機構を実装する。
- [ ] 現在位置と向きをセーブ／ロードできるようにする。
- [ ] 進行フラグをセーブ／ロードできるようにする。
- [ ] タイトル画面から「続きから遊ぶ」でロードできるようにする。
- [ ] セーブ失敗時のエラーハンドリングを実装する。

## 7. UI・メニュー
- [ ] クロスヘア（画面中央のマーク）を実装する。
- [ ] インタラクト可能時に「Eで調べる」などの UI を表示する処理を実装する。
- [ ] 懐中電灯バッテリー残量の UI を実装する。
- [ ] 設定メニュー（音量・マウス感度）を実装する。
- [ ] ポーズメニュー（再開・設定・タイトルへ戻る）を実装する。
- [ ] タイトル画面から「新規ゲーム」「続きから」「終了」を実装する。

## 8. サウンド・演出制御（コード側）
- [ ] BGM 再生を管理する `AudioManager` を実装する。
- [ ] BGM・SE の音量をミキサー経由で制御する処理を実装する。
- [ ] 足音・ドア・アイテム取得などの SE 再生処理を各スクリプトに組み込む。
- [ ] 特定イベント時に BGM 切り替え・ SE 再生を行うイベント処理を実装する。
- [ ] 画面のフェードイン／フェードアウト処理を実装する。
- [ ] エンディング突入時の演出（フェード・テキスト表示）を実装する。

## 9. デバッグ・開発補助
- [ ] デバッグ用に現在の進行フラグ一覧を表示する UI を実装する。
- [ ] 特定のチャプターにワープするデバッグメニューを実装する。
- [ ] FPS 表示や簡易パフォーマンス表示を有効にする。
- [ ] ログ出力形式を統一し、重要イベントをログに残す。
- [ ] ビルド専用設定（DEBUG/RELEASE の切り替え）を用意する。

## 10. Steam 連携・ビルド
- [ ] Windows 向けビルド設定（解像度・品質）を決める。
- [ ] Steam 用のビルドターゲット設定を確認する。
- [ ] Steamworks SDK 導入の方針を決める（実績対応の有無を含む）。
- [ ] テストビルドを作成し、実機（別 PC）で起動確認を行う。
- [ ] ビルド番号の管理方法を決める。
- [ ] 最終ビルド手順をドキュメント化する。

---

チェックボックスは進捗管理用の目安です。詳細仕様や優先順位は docs/concept.md および docs/development_plan.md と併せて参照してください。
